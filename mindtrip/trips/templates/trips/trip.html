{% extends "trips/base.html" %}

{% block content %}
	<div class="content">
		<div class="trip">
			<section class="basic-details">
				<div class="trip-picture">
					<img src="{{ trip.picture.url }}">
				</div>
				<div class="description">
					<p>Miejsce:<label>{{ trip.destination }} ({{ trip.country.name }})</label></p>
					<p>Początek:<label>{{ trip.start_at }}</label>
					<p>Koniec:<label>{{ trip.end_at }}</label>
					<p class="summary">{{ trip.summary }}</p>
				</div>
			</section>
			<h3>Dojazd</h3>
			<p><span>{{ trip.travel }}</span></p>
			<h3>Koszty dojazdu</h3>
			<p><span >{{ trip.travel_price }}</span></p>
			<h3>Noclegi</h3>
			<p><span>{{ trip.hotel }}</span></p>
			<h3>Koszty noclegów</h3>
			<p><span>{{ trip.hotel_price }}</span></p>
			{% if trip.planned_at %}
				<h3>Wyjazd planowany</h3>
				<p><span>{{ trip.planned_at }}</span></p>
			{% endif %}
			{% if trip.guidebook %}
				<h3>Przewodniki / mapy</h3>
				<p><span>{{ trip.guidebook }}</span></p>
			{% endif %}
			{% if trip.tips %}
				<h3>Wskazówki</h3>
				<p><span>{{ trip.tips|linebreaks }}</span></p>
			{% endif %}
			{% if trip.days.all %}
				<h3>Opis</h3>
				<section class="days">
					{% for day in trip.days.all %}
						<article>
							<label>{{ day.name }} <span>({{ day.date }})</span></label>
							<p>{{ day.description }}</p>
							{% if day.tips %}
								<p><span>Wskazówki:</span>{{ day.tips }}</p>
							{% endif %}
						</article>
						{% if day.photos %}
							<p><span>Zdjęcia:</span></p>
							<section class="trip-gallery">
								{% for photo in day.photos.all %}
									<div class="photo-container">
										<div class="trip-photo">
											<img src="{{ photo.photo.url }}">
										</div>
										<div class="photo-description">
											<p>{{ photo.description }}</p>
										</div>
									</div>
								{% endfor %}
							</section>
						{% endif %}
					{% endfor %}
				</section>
			{% endif %}
		</div>
		<h3>Komentarze</h3>
		{% for post in trip.posts.all %}
			<section class="post"{% if forloop.last %} id="last-post"{% endif %}>
				<label>{{ post.author }} ({{ post.created_at }}):</label>{{ post.content }}
			</section>
		{% endfor %}
		<h3>Dodaj komentarz</h3>
		<form method="post" action="{% url 'trip' trip.id %}#last-post">
			{% csrf_token %}
			<div class="form-row">
				<label for="id_author">Autor</label>
				<input id="id_author" type="text" required="" name="author" maxlength="255">
			</div>
			<div class="form-row">
				<label for="id_content">Treść</label>
				<textarea id="id_content" required="" rows="6" name="content" cols="40"></textarea>
			</div>
			<button type="submit">Wyślij</button>
		</form>
	</div>
{% endblock %}
